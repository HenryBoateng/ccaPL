/*
     Author: Francois Siewe (fsiewe@dmu.ac.uk or fsiewe@yahoo.fr)
*/

digraph CCA {
   clusterrank = local; node[style=filled]
   { rank=min;
      alice[shape=box, fontcolor=white, color=cyan4, group=alice];
      wifi[shape=box, fontcolor=white, color=cyan4, group=wifi];
      bob[shape=box, fontcolor=white, color=cyan4, group=bob];
   }
   // Generate vertical dashed lines (timelines)
   { node[shape=point,group=alice]; edge[dir=none, style=dashed];
      send0;
      recv3;
      alice -> send0;
      send0 -> recv3;
   }
   { node[shape=point,group=wifi]; edge[dir=none, style=dashed];
      recv0;
      send1;
      recv2;
      send3;
      wifi -> recv0;
      recv0 -> send1;
      send1 -> recv2;
      recv2 -> send3;
   }
   { node[shape=point,group=bob]; edge[dir=none, style=dashed];
      recv1;
      send2;
      bob -> recv1;
      recv1 -> send2;
   }
   // Rank communication edges, e.g. send0 -> recv0
   { rank = same;
      send0; recv0;
   }
   { rank = same;
      send1; recv1;
   }
   { rank = same;
      send2; recv2;
   }
   { rank = same;
      send3; recv3;
   }
   // Generate communication edges
   {
      edge[constraint=false];
   send0 -> recv0[label="alice,bob,hello"];
   send1 -> recv1[label="alice,hello"];
   send2 -> recv2[label="bob,alice,thanks"];
   send3 -> recv3[label="bob,thanks"];
   }
}
